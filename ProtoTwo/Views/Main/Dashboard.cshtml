@model ProtoTwo.Models.Main

@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<div class="box">
    <h2 style="color: dimgrey; font-family: Momcake; display: inline; float: left">Visitors Registry</h2>
    <div class="period">
        <h3 class="period_id linkgray" style='color: dimgrey; font-family: Momcake; float: right; padding-top: 5px'>&#187 @Html.ActionLink("Filter", "Filter")</h3>
    </div>
    <div>
        <table style="height: 80%">
            <tr>
                <th>ID</th>
                <th>FIRST NAME</th>
                <th>LAST NAME</th>
                <th>TAG</th>
            </tr>
            @{ var num = 1; var limit = ProtoTwo.Models.Main.VisitorList.Count(); }
            @foreach (var entry in ProtoTwo.Models.Main.VisitorList.Skip(Math.Max(0, limit - 7)))
            {
                <tr onclick="location.href = '@Url.Action("Registry", "Main")' + '#' + @entry.Tag">
                    <td>@num</td>
                    <td>@entry.FirstName</td>
                    <td>@entry.LastName</td>
                    <td>@entry.Tag</td>
                </tr>
                num += 1;
            }
        </table>
    </div>
</div>
<div class="box" style="float: right;">
    <h2 style="color: dimgrey; font-family: Momcake; display: inline; float: left">Guest List</h2>
    <div class="period">
        <h3 class="period_id linkgray" style="color: dimgrey; font-family: Momcake; float: right; padding-top: 5px">&#187 @Html.ActionLink("Filter", "Filter")</h3>
    </div>
    <div>
        <table style="height: 80%">
            <tr>
                <th>ID</th>
                <th>FIRST NAME</th>
                <th>LAST NAME</th>
                <th>TAG</th>
            </tr>
            @{ num = 1; limit = ProtoTwo.Models.Main.CGuestList.Count(); }
            @foreach (var entry in ProtoTwo.Models.Main.CGuestList.Skip(Math.Max(0, limit - 7)))
            {
                <tr onclick="location.href = '@Url.Action("GuestList", "Main", new { id = @entry.Tag })'">
                    <td>@num</td>
                    <td>@entry.FirstName</td>
                    <td>@entry.LastName</td>
                    <td>@entry.Tag</td>
                </tr>
                num += 1;
            }
        </table>
    </div>
</div>

<div class="box">
    <h2 style="color: dimgrey; font-family: Momcake">Visitor Distribution</h2>
    <div style="width: 100%; height: 165px; background-image: linear-gradient(whitesmoke, white); box-sizing: border-box; border-radius: 15px; border: 5px solid dimgray; overflow: hidden">
        <div style="width: 10%; height: 100%; float: left; margin: 0px; background-image: linear-gradient(gray, dimgray); padding: 0px;">
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">MON</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">TUE</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">WED</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">THU</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">FRI</h3>
        </div>
        <div style="width: 80%; height: 100%; float: left; margin: 0px; box-shadow: 1px 0px 20px white; padding-left: 10px; z-index: -1">
            <div style="padding: 0px; width: 73%; height: 15px; background-image: linear-gradient(gray, dimgray); margin-top: 8px; border-right: 3px solid lawngreen; border-radius: 10px 20px 20px 10px;"></div>
            <div style="padding: 0px; width: 56%; height: 15px; background-image: linear-gradient(gray, dimgray); margin-top: 16px; border-right: 3px solid lawngreen; border-radius: 10px 20px 20px 10px"></div>
            <div style="padding: 0px; width: 31%; height: 15px; background-image: linear-gradient(gray, dimgray); margin-top: 17px; border-right: 3px solid lawngreen; border-radius: 10px 20px 20px 10px"></div>
            <div style="padding: 0px; width: 60%; height: 15px; background-image: linear-gradient(gray, dimgray); margin-top: 16px; border-right: 3px solid lawngreen; border-radius: 10px 20px 20px 10px"></div>
            <div style="padding: 0px; width: 49%; height: 15px; background-image: linear-gradient(gray, dimgray); margin-top: 16px; border-right: 3px solid lawngreen; border-radius: 10px 20px 20px 10px"></div>
        </div>
        <div style="width: 10%; height: 100%; float: left; margin: 0px; padding: 0px; background-color: lawngreen; box-shadow: 1px 0px 10px lawngreen;">
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">73</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">56</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">31</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">60</h3>
            <h3 class="font5" style="padding: 5px 10px 5px 10px; color: white; text-align: center; margin: 0px">49</h3>
        </div>
    </div>
</div>

<div class="box" style="float: right;">
    <h2 style="color: dimgrey; font-family: Momcake">Insights</h2>

    <div style="background-image: linear-gradient(lawngreen, forestgreen); border-radius: 10px; height: 310px; width: 32%; float: left; margin: 1%; box-sizing: border-box">
        <div style="background-color: white; border-radius: 10px; height: 200px; width: 100%; box-sizing: border-box">
            <div style="width: 100%; height: 90px; background-color: dimgray; border-radius: 10px; border-top: 5px solid lawngreen">
                <h4 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white">Total Visitors</h4>
                <h1 class="font5" style="padding: 0px 20px 20px 20px; margin: 0px; color: white; font-size: 40px">@ProtoTwo.Models.Main.VisitorList.Count()</h1>
            </div>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">Today</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">@ProtoTwo.Models.Main.VisitorList.Where(mod => mod.RegDate == DateTime.Now.ToString("d")).Count()</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">This Week</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">
                @{
                    var date2 = DateTime.Now.ToString("d");
                    ProtoTwo.Models.Main mod1 = new ProtoTwo.Models.Main();
                }
                @ProtoTwo.Models.Main.VisitorList.Where(mod => mod1.isInWeek(Convert.ToDateTime(mod.RegDate))).Count()
            </h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">This Month</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">
                @{
                    @ProtoTwo.Models.Main.VisitorList.Where(mod => Convert.ToDateTime(mod.RegDate).Month == DateTime.Now.Month && Convert.ToDateTime(mod.RegDate).Year == DateTime.Now.Year).Count()
                }
            </h5>
        </div>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Daily</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Weekly</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Monthly</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
    </div>
    <div style="background-image: linear-gradient(lawngreen, forestgreen); border-radius: 10px; height: 310px; width: 31%; float: left; margin: 1%; box-sizing: border-box">
        <div style="background-color: white; border-radius: 10px; height: 200px; width: 100%; box-sizing: border-box">
            <div style="width: 100%; height: 90px; background-color: dimgray; border-radius: 10px; border-top: 5px solid lawngreen">
                <h4 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white">Total Guests</h4>
                <h1 class="font5" style="padding: 0px 20px 20px 20px; margin: 0px; color: white; font-size: 40px">@ProtoTwo.Models.Main.CGuestList.Count()</h1>
            </div>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">Today</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">@ProtoTwo.Models.Main.CGuestList.Where(mod => mod.RegDate == DateTime.Now.ToString("d")).Count()</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">This Week</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">
                @{
                    date2 = DateTime.Now.ToString("d");
                    ProtoTwo.Models.Main mod2 = new ProtoTwo.Models.Main();
                }
                @ProtoTwo.Models.Main.CGuestList.Where(mod => mod2.isInWeek(Convert.ToDateTime(mod.RegDate))).Count()
            </h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">This Month</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">
                @{
                    @ProtoTwo.Models.Main.CGuestList.Where(mod => Convert.ToDateTime(mod.RegDate).Month == DateTime.Now.Month && Convert.ToDateTime(mod.RegDate).Year == DateTime.Now.Year).Count()
                }
            </h5>
        </div>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Daily</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Weekly</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
        <h5 class="font1" style="padding: 15px 13px 0px 20px; margin: 0px; color: white; float: left">Avg. Monthly</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
    </div>
    <div style="background-image: linear-gradient(lawngreen, forestgreen); border-radius: 10px; height: 310px; width: 31%; float: left; margin: 1%; box-sizing: border-box">
        <div style="background-color: white; border-radius: 10px; height: 200px; width: 100%; box-sizing: border-box">
            <div style="width: 100%; height: 90px; background-color: dimgray; border-radius: 10px; border-top: 5px solid lawngreen">
                <h4 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white">Total CSR (Avg.)</h4>
                <h1 class="font5" style="padding: 0px 20px 20px 20px; margin: 0px; color: white; font-size: 40px">
                    @{
                        var num0 = 0;
                        foreach (var entry in @ProtoTwo.Models.Main.RatingsList) { num0 += @entry.Ratings; }
                        var num1 = @ProtoTwo.Models.Main.RatingsList.Count();
                        var num3 = Convert.ToString((num0 / num1) * 10);
                    }
                    @num3%
                </h1>
            </div>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">Today</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">@ProtoTwo.Models.Main.RatingsList.Where(mod => mod.SetDate == DateTime.Now.ToString("d")).Count()</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">This Week</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">
                @{
                    date2 = DateTime.Now.ToString("d");
                    ProtoTwo.Models.Main mod3 = new ProtoTwo.Models.Main();
                }
                @ProtoTwo.Models.Main.RatingsList.Where(mod => mod3.isInWeek(Convert.ToDateTime(mod.SetDate))).Count()
            </h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: left">This Month</h5>
            <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: black; float: right">
                @{
                    @ProtoTwo.Models.Main.RatingsList.Where(mod => Convert.ToDateTime(mod.SetDate).Month == DateTime.Now.Month && Convert.ToDateTime(mod.SetDate).Year == DateTime.Now.Year).Count()
                }
            </h5>
        </div>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Daily</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
        <h5 class="font1" style="padding: 15px 15px 0px 20px; margin: 0px; color: white; float: left">Avg. Weekly</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
        <h5 class="font1" style="padding: 15px 13px 0px 20px; margin: 0px; color: white; float: left">Avg. Monthly</h5>
        <h5 class="font1" style="padding: 15px 20px 0px 20px; margin: 0px; color: white; float: right">000</h5>
    </div>
</div>

